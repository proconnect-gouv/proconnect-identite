{
  "name": "proconnect-identite",
  "version": "1.0.0",
  "private": true,
  "license": "MIT",
  "type": "module",
  "imports": {
    "#cypress/*": "./cypress/*.ts"
  },
  "main": "src/index.js",
  "workspaces": [
    "packages/annuaire_entreprises",
    "packages/core",
    "packages/database",
    "packages/crisp",
    "packages/debounce",
    "packages/devtools/typescript",
    "packages/email",
    "packages/entreprise",
    "packages/insee",
    "packages/registre_national_entreprises",
    "packages/identite",
    "packages/testing"
  ],
  "scripts": {
    "build": "run-s build:**",
    "build:assets": "vite build --clearScreen false",
    "build:workspaces": "npm run build --if-present --workspaces",
    "build:db:conditionaly-load-fixtures": "if [ \"$RUN_FIXTURES\" = \"True\" ]; then npm run fixtures:load; fi",
    "build:db:migrate": "npm run --silent migrate -- up",
    "delete-database": "if [ \"$ENABLE_DATABASE_DELETION\" = \"True\" ]; then tsx scripts/run-sql-script.ts scripts/delete_all.sql; fi",
    "predev": "npm run build:workspaces",
    "dev": "NODE_ENV=development concurrently \"npm:watch:*(!node)\" \"npm:watch:node\"",
    "dev:test": "npm run test:unit:runner --watch test/**/*.test.ts",
    "clean": "npx -y del-cli build dist node_modules packages/*/dist packages/*/node_modules packages/*/tsconfig*.tsbuildinfo",
    "e2e:dev": "tsx scripts/cypress-single-test-setup.ts",
    "e2e:run": "tsx scripts/cypress-single-test-run.ts",
    "e2e:studio": "npx cypress open",
    "fixtures:load": "npm run --silent build:db:migrate && tsx scripts/run-sql-script.ts scripts/fixtures.sql && npm run update-organization-info 0",
    "fixtures:load-ci": "tsx scripts/run-sql-script.ts",
    "lint": "prettier --write '**/*.{ts,sql}'",
    "migrate": "dotenvx --quiet run --convention=flow -- node-pg-migrate",
    "start": "tsx --import ./src/instrument.ts src/index.ts",
    "test": "run-s test:*",
    "test:lint": "prettier '**/*.{ts,sql}' --list-different",
    "test:type-check": "tsc --noEmit",
    "test:unit": "npm run test:unit:runner src/**/*.test.ts test/**/*.test.ts",
    "test:unit:runner": "tsx --env-file=.env.test --test --test-reporter=spec",
    "test:workspaces": "npm run test --if-present --workspaces",
    "update-one-mocked-organization": "UPDATE_SNAPSHOT=True tsx mocks/entreprise.api.gouv.fr/add-establishment.ts",
    "update-organization-info": "tsx scripts/update-organizations-info.ts",
    "version": "changeset version && npm install --package-lock-only",
    "watch:assets": "NODE_ENV=development vite build --clearScreen false --watch",
    "watch:ejs": "CHOKIDAR_USEPOLLING=true copy-and-watch --clean --watch \"src/views/**/*.ejs\" src/views/*.ejs build/views/",
    "watch:js": "tsc --watch --preserveWatchOutput",
    "watch:node": "tsx watch --import ./src/instrument.ts src/index.ts",
    "watch:workspaces:core": "npm run dev --if-present --workspace=@proconnect-gouv/proconnect.core",
    "watch:workspaces:crisp": "npm run dev --if-present --workspace=@proconnect-gouv/proconnect.crisp",
    "watch:workspaces:debounce": "npm run dev --if-present --workspace=@proconnect-gouv/proconnect.debounce",
    "watch:workspaces:email": "npm run dev --if-present --workspace=@proconnect-gouv/proconnect.email",
    "watch:workspaces:entreprise": "npm run dev --if-present --workspace=@proconnect-gouv/proconnect.api_entreprise",
    "watch:workspaces:insee": "npm run dev --if-present --workspace=@proconnect-gouv/proconnect.insee",
    "watch:workspaces:identite": "npm run dev --if-present --workspace=@proconnect-gouv/proconnect.identite"
  },
  "prettier": {
    "language": "postgresql",
    "plugins": [
      "prettier-plugin-organize-imports",
      "prettier-plugin-sql"
    ]
  },
  "dependencies": {
    "@proconnect-gouv/proconnect.api_entreprise": "workspace:*",
    "@proconnect-gouv/proconnect.core": "workspace:*",
    "@proconnect-gouv/proconnect.crisp": "workspace:*",
    "@proconnect-gouv/proconnect.debounce": "workspace:*",
    "@proconnect-gouv/proconnect.email": "workspace:*",
    "@proconnect-gouv/proconnect.identite": "workspace:*",
    "@proconnect-gouv/proconnect.insee": "workspace:*",
    "@proconnect-gouv/proconnect.registre_national_entreprises": "workspace:*",
    "@proconnect-gouv/proconnect.testing": "workspace:*",
    "@sentry/node": "^10.30.0",
    "@sentry/profiling-node": "^10.30.0",
    "@simplewebauthn/browser": "^13.2.2",
    "@simplewebauthn/server": "^13.2.2",
    "await-to-js": "^3.0.0",
    "axios": "^1.12.2",
    "connect-redis": "^8.1.0",
    "console-log-level": "^1.4.1",
    "cookie-parser": "^1.4.7",
    "csrf-sync": "^4.2.1",
    "dotenv-flow": "^4.1.0",
    "ejs": "^3.1.10",
    "express": "^5.2.0",
    "express-basic-auth": "^1.2.1",
    "express-session": "^1.18.2",
    "helmet": "^8.1.0",
    "html-to-text": "^9.0.5",
    "http-errors": "^2.0.0",
    "ioredis": "^5.6.1",
    "lodash-es": "^4.17.21",
    "moment": "^2.30.1",
    "moment-timezone": "^0.5.48",
    "morgan": "^1.10.1",
    "nocache": "^4.0.0",
    "nodemailer": "^7.0.11",
    "oidc-provider": "^9.5.1",
    "otpauth": "^9.4.1",
    "pg": "^8.16.3",
    "qrcode": "^1.5.4",
    "rate-limiter-flexible": "^7.2.0",
    "ts-pattern": "^5.7.0",
    "tsx": "^4.20.3",
    "zod": "^4.0.17",
    "zod-validation-error": "^4.0.1"
  },
  "devDependencies": {
    "@changesets/changelog-github": "^0.5.1",
    "@changesets/cli": "^2.29.6",
    "@dotenvx/dotenvx": "^1.47.3",
    "@fullhuman/postcss-purgecss": "^7.0.2",
    "@gouvfr/dsfr": "^1.14.2",
    "@kitajs/html": "^4.2.9",
    "@kitajs/ts-html-plugin": "^4.1.1",
    "@proconnect-gouv/proconnect.devtools.typescript": "workspace:*",
    "@proconnect-gouv/proconnect.testing": "workspace:*",
    "@types/console-log-level": "^1.4.5",
    "@types/cookie-parser": "^1.4.9",
    "@types/ejs": "^3.1.5",
    "@types/express": "^5.0.3",
    "@types/express-session": "^1.18.2",
    "@types/html-to-text": "^9.0.4",
    "@types/http-errors": "^2.0.4",
    "@types/lodash": "^4.17.20",
    "@types/lodash-es": "^4.17.12",
    "@types/morgan": "^1.9.10",
    "@types/node": "^22.18.6",
    "@types/nodemailer": "^7.0.2",
    "@types/oidc-provider": "^9.5.0",
    "@types/pg": "^8.15.5",
    "@types/qrcode": "^1.5.5",
    "axe-core": "^4.10.3",
    "concurrently": "^9.1.2",
    "copy-and-watch": "^0.1.8",
    "csv": "^6.4.1",
    "cypress": "^15.8.1",
    "cypress-axe": "^1.6.0",
    "cypress-maildev": "^1.3.3",
    "jose": "^6.0.11",
    "lodash": "^4.17.21",
    "nock": "^14.0.10",
    "node-pg-migrate": "^8.0.3",
    "npm-run-all2": "^8.0.4",
    "prettier": "^3.6.2",
    "prettier-plugin-organize-imports": "^4.1.0",
    "prettier-plugin-sql": "^0.19.2",
    "tld-extract": "^2.1.0",
    "typescript": "^5.8.3",
    "vite": "^7.1.9",
    "zx": "^8.8.4"
  },
  "engines": {
    "node": "^24.11.0"
  }
}
